<meta charset="UTF-8">
<style>b { display: block; margin-top: 10px; } </style>

Full change log with screen shots <a href="http://smarttemplate4.mozdev.org/version.html#2.8">can be found here</a>

<b>Improvements</b>
<ul>

<li><a href="https://github.com/RealRaven2000/SmartTemplate4/issues/31">[issue 31]</a> New premium variables to remove text / tags from quoted parts.


<code>%deleteQuotedText("<i>searchText</i>",<i>quoteLevel</i>)%</code> Deletes quoted Text 
<code>%replaceQuotedText("<i>searchText</i>","<i>replacementHTML</i>",<i>quoteLevel</i>)%</code> Replaces quoted text

<i>searchText</i> - must be in double quotes - the searchText argument must be a regular expression. Note that whitespace can be best represented as \s because it can also contain line breaks. Commas and double quote characters cannot be used.
<i>replacementHTML</i> - must be in double quotes - text or a html tag which will be inserted in page.
<i>quoteLevel</i> - optional, (number) which minimal quote level to start from.

<code>%deleteQuotedTags("<i>selector</i>",<i>quoteLevel</i>,<i>minSize</i>)%</code> Deletes tags from the quote
<code>%replaceQuotedTags("<i>selector</i>","<i>replacementHTML</i>",<i>quoteLevel</i>,<i>minSize</i>)%</code> Deletes tags from the quote
<i>selector</i> -  what you would use to address the tag in css. simplest case "img", or "p" but attribute selectors can be added as long as double quotes can be avoided.
<i>quoteLevel</i> - A note on quoteLevel, for images I would recommend 2 if you want to remove images to retain some context in your replies. This will dramatically decrease email sizes in long threads which contain a lot of images (e.g. screenshots).
<i>minSize</i> - (optional, numeric) - number of kByte, minimum size for removing the tag. 
This way you can keep smaller images like icons / emojis while discarding large images.
</li>
<li>Variables window: Added documentation for address book functions and modernized layout. Added accordion UI to minimize scrolling. Simply click one of the headers to expand an article.
</li> 
<li><a href="https://github.com/RealRaven2000/SmartTemplate4/issues/33">[issue 33]</a> New variable %mailto(body)% for including body text for internet mailto links in template. Also slightly improved behavior if body is empty, so that standard template can be used when a mailto link is clicked on.</li>
<li><a href="https://github.com/RealRaven2000/SmartTemplate4/issues/35">[issue 35]</a> Extended <code>%identity%</code> with the variable 'addressbook' in order to extract <a href="http://smarttemplate4.mozdev.org/variables.html#ab_fields">extended info from the Address Book</a> based on an email match, some examples:

  %identity(addressbook,work.title)%
  %identity(addressbook,work.organization)%
  %identity(addressbook,homephone)%
  
The addressbook variables also support using the optionality syntax [[ ... ]] in order to leave out a section of text or html if the particular addressbook field is empty. 

The following line will be omitted if State information is not available from the address book for the current identity:

[[State: %identity(addressbook,work.state)%]]         
</li>
<li>Completed translations for locales: cs, es-ES, fi, it, pl,pt-BR, ru, sl, sv-SE.</li>
<li>The template editor boxes now resize vertically with dialog for easier editing.</li>
<li>Added international examples for <code class="inline">%dateformat%</code> in the variables tab.</a>
</ul>

<b>Bug Fixes</b>
<ul>
<li>Fixed: <a href="https://github.com/RealRaven2000/SmartTemplate4/issues/32">[issue 30]</a>, <a href="https://github.com/RealRaven2000/SmartTemplate4/issues/32">[issue 32]</a>, <a name="26755" href="https://www.mozdev.org/bugs/show_bug.cgi?id=26755" target="_blank">[Bug 26755]</a>
Some reply / forward buttons were missing the file template dropdowns.
</li>
<li><a href="https://github.com/RealRaven2000/SmartTemplate4/issues/36">[issue 36]</a>
Fixed: Smart-Reply button is missing template menus / template menus not working on combined "Reply All" / "Reply to Sender" / "Reply to List" button in preview header area.

I have added a simplified menu solution for this case. Instead of having template submenus for each command, clicking a template below the smart buttons is modified through the keys [Shift] and [Ctrl]. The template items will:
  <ul style="list-style-type:disc !important; list-style-image: none !important;">
  <li>trigger the top command (e.g. reply all) by clicking on any templates below</li>
  <li>trigger the 2nd command (e.g. reply to sender) via Shift+click</li>
  <li>trigger the 3rd command via Ctrl+click</li>
  </ul>
</li>
<li>Fixed: <a href="https://github.com/RealRaven2000/SmartTemplate4/issues/38">[issue 38]</a> Images with encoded file URLs are not loaded correctly. An image tag that contains URLencoded characters can lead to the image not being loaded, for example:
<code>&lt;img src="file:///C%3A%5CUsers%5CJohn%5Cimg%5Cimg3.png"&gt;</code>
</li>
</ul>